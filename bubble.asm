bubble_sort:
    mov si, offset keys_average  ; Початок масиву середніх значень
    mov cx, keys_count            ; Кількість ключів для сортування
outer_loop:
    mov di, si            ; Початок поточного проходження
    mov bx, cx            ; Зберігання кількості порівнянь
inner_loop:
    mov ax, [di]          ; Завантаження першого значення
    mov dx, [di + 2]      ; Завантаження другого значення
    cmp ax, dx            ; Порівняння
    jge skip_swap         ; Перехід, якщо поточний елемент менший або рівний наступному
    xchg ax, dx           ; Обмін значень
    mov [di], ax          ; Зберігання першого значення
    mov [di + 2], dx      ; Зберігання другого значення
skip_swap:
    add di, 4             ; Перехід до наступної пари значень
    dec bx                ; Зменшення лічильника порівнянь
    jnz inner_loop        ; Перехід, якщо не кінець внутрішнього циклу
    dec cx                ; Зменшення лічильника ключів
    jnz outer_loop        ; Перехід, якщо не кінець зовнішнього циклу
    ret
